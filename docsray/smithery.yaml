version: 1
name: docsray
description: PDF Question-Answering System with advanced RAG capabilities
mcp_version: 1.0.0

# MCP server start configuration
start:
  # Since MCP uses stdio, we run the Python module directly
  command: ["python", "-m", "mcp_server"]
  # MCP servers communicate via stdio, not HTTP ports
  # But we can specify a port for health checks if needed
  port: null

# Configuration schema for the MCP server
configSchema:
  type: object
  properties:
    pdf_directory:
      type: string
      description: "Default directory to scan for PDF files"
      default: "/app/data/original"
    ocr_language:
      type: string
      description: "OCR language setting (e.g., 'kor+eng' for Korean and English)"
      default: "kor+eng"
    cache_directory:
      type: string
      description: "Directory for caching processed PDFs"
      default: "/app/data/mcp_data/cache"
    extract_timeout:
      type: integer
      description: "Maximum time in seconds for PDF extraction"
      default: 1800

# MCP capabilities
tools:
  - name: get_current_directory
    description: Get the current PDF directory path
  - name: set_current_directory
    description: Set the current PDF directory
  - name: get_directory_info
    description: Get detailed information about a directory
  - name: list_pdfs
    description: List all PDF files in the current or specified folder
  - name: load_pdf
    description: Load and process a PDF file
  - name: reset_initial_setup
    description: Reset initial setup and configure PDF directory again
  - name: ask_question
    description: Ask a question about the loaded PDF

# Resource requirements
resources:
  memory: "8Gi"  # Models require significant memory
  cpu: "2"       # CPU for model inference

# Environment variables
env:
  DOCSRAY_MCP_MODE: "1"
  DOCSRAY_HOME: "/app/.docsray"
  TESSDATA_PREFIX: "/usr/share/tesseract-ocr/4.00/tessdata"